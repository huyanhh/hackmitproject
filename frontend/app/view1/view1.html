
<p>TODO: </p>
<p>1. Add an alarm</p>
<p>2. Edit an alarm //done</p>
<p>3. Delete an alarm</p>
<p>4. Scheduling //done</p>


<div ng-repeat="(key, groupname) in group">
	<p>{{key}} - {{groupname.state}}</p>
	Change Mode: <input type="text" ng-model="newState"/>
	<button ng-click="changemode(key, newState)">Change mode</button><br><br>

	Alarms:
	<div ng-repeat="alarm in groupname.alarms track by $index" ng-if="groupname.alarms">
		Alarm {{$index + 1}} - Every day at {{alarm.setoffTime}} for {{alarm.duration}}
		<button ng-click="alarm.edit=!alarm.edit">Edit alarm</button>
		<div ng-show="alarm.edit">
			Time: <input type="time" ng-model="alarm.newSetoffTime" step="60"><br>
			Duration: <input type="number" ng-model="alarm.newDuration"><br>
			<button ng-click="saveAlarmEdits($index, alarm, key)">Save</button>
		</div>

	</div>
	<button>Add alarm</button><br>

	<div ng-if="!groupname.waketime" ng-if="!groupname.bedtime" ng-repeat="warning in warnings track by $index">{{warning}}</div>
	<div ng-if="groupname.waketime" ng-if="groupname.bedtime">
	SleepWake: Awake between {{groupname.waketimeFormatted}} and {{groupname.bedtimeFormatted}} <button ng-click="groupname.editSleepWake=!groupname.editSleepWake">Change</button>
	</div>
	<button ng-if="!groupname.waketime" ng-if="!groupname.bedtime" ng-click="groupname.editSleepWake=!groupname.editSleepWake">Add Sleep/Wake Time</button>
	<div ng-if="groupname.editSleepWake">
		{{groupname}}
		Awake from <input type="time" ng-model="groupname.newWakeTime"> to <input type="time" ng-model="groupname.newBedTime">
		<button ng-click="changeAwakeTime(groupname, key)">Update!<button>

	</div>

	<hr>
</div> 